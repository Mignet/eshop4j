<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.eshop4j.web.dao.CimOrginfoMapper">
	<!-- APP端 Result Map-->
	<resultMap  type="com.eshop4j.web.model.CimOrginfo" id="BaseResultMap">
		<result column="id" property="id" jdbcType="INTEGER"/>
		<result column="org_number" property="orgNumber" jdbcType="VARCHAR"/>
		<result column="name" property="name" jdbcType="VARCHAR"/>
		<result column="org_account" property="orgAccount" jdbcType="VARCHAR"/>
		<result column="org_password" property="orgPassword" jdbcType="VARCHAR"/>
		<result column="context" property="context" jdbcType="VARCHAR"/>
		<result column="capital" property="capital" jdbcType="VARCHAR"/>
		<result column="up_time" property="upTime" jdbcType="TIMESTAMP"/>
		<result column="city" property="city" jdbcType="VARCHAR"/>
		<result column="icp_filing" property="icpFiling" jdbcType="VARCHAR"/>
		<result column="representative" property="representative" jdbcType="VARCHAR"/>
		<result column="contact" property="contact" jdbcType="VARCHAR"/>
		<result column="platform_ico" property="platformIco" jdbcType="VARCHAR"/>
		<result column="platformlist_ico" property="platformlistIco" jdbcType="VARCHAR"/>
		<result column="platform_detail_img" property="platformDetailImg" jdbcType="VARCHAR"/>
		<result column="business_license" property="businessLicense" jdbcType="VARCHAR"/>
		<result column="recommend" property="recommend" jdbcType="INTEGER"/>
		<result column="grade" property="grade" jdbcType="VARCHAR"/>
		<result column="top" property="top" jdbcType="INTEGER"/>
		<result column="homepage_sort" property="homepageSort" jdbcType="INTEGER"/>
		<result column="status" property="status" jdbcType="INTEGER"/>
		<result column="remark" property="remark" jdbcType="VARCHAR"/>
		<result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
		<result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
		<result column="min_profit" property="minProfit" jdbcType="DECIMAL"/>
		<result column="max_profit" property="maxProfit" jdbcType="DECIMAL"/>
		<result column="min_fee_ratio" property="minFeeRatio" jdbcType="DECIMAL"/>
		<result column="max_fee_ratio" property="maxFeeRatio" jdbcType="DECIMAL"/>
		<result column="min_dead_line" property="minDeadLine" jdbcType="INTEGER"/>
		<result column="max_dead_line" property="maxDeadLine" jdbcType="INTEGER"/>
		<result column="dead_line_min_self_defined" property="deadLineMinSelfDefined" jdbcType="VARCHAR"/>
		<result column="dead_line_max_self_defined" property="deadLineMaxSelfDefined" jdbcType="VARCHAR"/>
		<result column="org_url" property="orgUrl" jdbcType="VARCHAR"/>
		<result column="org_product_url" property="orgProductUrl" jdbcType="VARCHAR"/>
		<result column="org_usercenter_url" property="orgUsercenterUrl" jdbcType="VARCHAR"/>
		<result column="org_bind_user_url" property="orgBindUserUrl" jdbcType="VARCHAR"/>
		<result column="org_user_exist_url" property="orgUserExistUrl" jdbcType="VARCHAR"/>
		<result column="org_userbalance_url" property="orgUserbalanceUrl" jdbcType="VARCHAR"/>
		<result column="trusteeship" property="trusteeship" jdbcType="VARCHAR"/>
		<result column="org_profile" property="orgProfile" jdbcType="LONGVARCHAR"/>
		<result column="org_security" property="orgSecurity" jdbcType="LONGVARCHAR"/>
		<result column="org_fee_ratio" property="orgFeeRatio" jdbcType="DECIMAL"/>
		<result column="org_fee_type" property="orgFeeType" jdbcType="INTEGER"/>
		<result column="org_amount_limit" property="orgAmountLimit" jdbcType="DECIMAL"/>
		<result column="org_investdeadline_limit" property="orgInvestdeadlineLimit" jdbcType="INTEGER"/>
		<result column="usable_product_nums" property="usableProductNums" jdbcType="INTEGER"/>
		<result column="org_isstaticproduct" property="orgIsstaticproduct" jdbcType="INTEGER"/>
		<result column="org_advertisement" property="orgAdvertisement" jdbcType="VARCHAR"/>
		<result column="org_advertisement_url" property="orgAdvertisementUrl" jdbcType="VARCHAR"/>
		<result column="org_advantage" property="orgAdvantage" jdbcType="VARCHAR"/>
		<result column="org_tag" property="orgTag" jdbcType="VARCHAR"/>
		<result column="org_product_tag" property="orgProductTag" jdbcType="VARCHAR"/>
		<result column="org_invest_strategy" property="orgInvestStrategy" jdbcType="LONGVARCHAR"/>
		<result column="org_planner_strategy" property="orgPlannerStrategy" jdbcType="LONGVARCHAR"/>
		<result column="org_invest_tag" property="orgInvestTag" jdbcType="VARCHAR"/>
		<result column="org_planner_tag" property="orgPlannerTag" jdbcType="VARCHAR"/>
		<result column="org_planner_product_tag" property="orgPlannerProductTag" jdbcType="VARCHAR"/>
		<result column="org_joint_type" property="orgJointType" jdbcType="INTEGER"/>
		<result column="org_gray_status" property="orgGrayStatus" jdbcType="INTEGER"/>
		<result column="org_newest_img" property="orgNewestImg" jdbcType="VARCHAR"/>
		<result column="pc_platform_img" property="pcPlatformImg" jdbcType="VARCHAR"/>
		<result column="pc_platform_list_img" property="pcPlatformListImg" jdbcType="VARCHAR"/>
		<result column="pc_platform_detail_img" property="pcPlatformDetailImg" jdbcType="VARCHAR"/>
	</resultMap>
	
	<!-- 运营后台WEB端  Result Map-->
	<resultMap  type="com.eshop4j.web.model.cim.CimOrginfoWeb" id="WebBaseResultMap">
		<result column="id" property="id" jdbcType="INTEGER"/>
		<result column="org_number" property="orgNumber" jdbcType="VARCHAR"/>
		<result column="name" property="name" jdbcType="VARCHAR"/>
		<result column="org_account" property="orgAccount" jdbcType="VARCHAR"/>
		<result column="org_password" property="orgPassword" jdbcType="VARCHAR"/>
		<result column="context" property="context" jdbcType="VARCHAR"/>
		<result column="capital" property="capital" jdbcType="VARCHAR"/>
		<result column="up_time" property="upTime" jdbcType="TIMESTAMP"/>
		<result column="city" property="city" jdbcType="VARCHAR"/>
		<result column="icp_filing" property="icpFiling" jdbcType="VARCHAR"/>
		<result column="representative" property="representative" jdbcType="VARCHAR"/>
		<result column="contact" property="contact" jdbcType="VARCHAR"/>
		<result column="platform_ico" property="platformIco" jdbcType="VARCHAR"/>
		<result column="platformlist_ico" property="platformlistIco" jdbcType="VARCHAR"/>
		<result column="platform_detail_img" property="platformDetailImg" jdbcType="VARCHAR"/>
		<result column="business_license" property="businessLicense" jdbcType="VARCHAR"/>
		<result column="recommend" property="recommend" jdbcType="INTEGER"/>
		<result column="grade" property="grade" jdbcType="VARCHAR"/>
		<result column="top" property="top" jdbcType="INTEGER"/>
		<result column="homepage_sort" property="homepageSort" jdbcType="INTEGER"/>
		<result column="status" property="status" jdbcType="INTEGER"/>
		<result column="remark" property="remark" jdbcType="VARCHAR"/>
		<result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
		<result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
		<result column="min_profit" property="minProfit" jdbcType="DECIMAL"/>
		<result column="max_profit" property="maxProfit" jdbcType="DECIMAL"/>
		<result column="min_fee_ratio" property="minFeeRatio" jdbcType="DECIMAL"/>
		<result column="max_fee_ratio" property="maxFeeRatio" jdbcType="DECIMAL"/>
		<result column="min_dead_line" property="minDeadLine" jdbcType="INTEGER"/>
		<result column="max_dead_line" property="maxDeadLine" jdbcType="INTEGER"/>
		<result column="dead_line_min_self_defined" property="deadLineMinSelfDefined" jdbcType="VARCHAR"/>
		<result column="dead_line_max_self_defined" property="deadLineMaxSelfDefined" jdbcType="VARCHAR"/>
		<result column="org_url" property="orgUrl" jdbcType="VARCHAR"/>
		<result column="org_product_url" property="orgProductUrl" jdbcType="VARCHAR"/>
		<result column="org_usercenter_url" property="orgUsercenterUrl" jdbcType="VARCHAR"/>
		<result column="org_bind_user_url" property="orgBindUserUrl" jdbcType="VARCHAR"/>
		<result column="org_userbalance_url" property="orgUserbalanceUrl" jdbcType="VARCHAR"/>
		<result column="org_user_exist_url" property="orgUserExistUrl" jdbcType="VARCHAR" />
		<result column="trusteeship" property="trusteeship" jdbcType="VARCHAR"/>
		<result column="org_profile" property="orgProfile" jdbcType="LONGVARCHAR"/>
		<result column="org_security" property="orgSecurity" jdbcType="LONGVARCHAR"/>
		<result column="org_fee_ratio" property="orgFeeRatio" jdbcType="DECIMAL"/>
		<result column="org_fee_type" property="orgFeeType" jdbcType="INTEGER"/>
		<result column="org_amount_limit" property="orgAmountLimit" jdbcType="DECIMAL"/>
		<result column="org_investdeadline_limit" property="orgInvestdeadlineLimit" jdbcType="INTEGER"/>
		<result column="org_creator" property="orgCreator" jdbcType="VARCHAR"/>
		<result column="org_updater" property="orgUpdater" jdbcType="VARCHAR"/>
		<result column="org_isstaticproduct" property="orgIsstaticproduct" jdbcType="INTEGER"/>
		<result column="org_advertisement" property="orgAdvertisement" jdbcType="VARCHAR"/>
	</resultMap>
	
	<!-- 移动APP端  平台详情 机构信息表与团队详情表 配置一对多关系映射 -->
	<resultMap type="com.eshop4j.web.model.cim.OrgInfo" id="CimOrgInfoDetails">
		<id column="id" property="id" jdbcType="INTEGER"/>
		<result column="org_number" property="orgNo" jdbcType="VARCHAR"/>
		<result column="platform_ico" property="platformIco" jdbcType="VARCHAR"/>
		<result column="name" property="orgName" jdbcType="VARCHAR"/>
		<result column="platform_detail_img" property="orgLogo" jdbcType="VARCHAR"/>
		<result column="grade" property="orgLevel" jdbcType="VARCHAR"/>
	    <result column="org_url" property="orgUrl" jdbcType="VARCHAR"/>
		<result column="context" property="orgBack" jdbcType="VARCHAR"/>
		<result column="capital" property="capital" jdbcType="VARCHAR"/>
		<result column="city" property="city" jdbcType="VARCHAR"/>
		<result column="up_time" property="upTime" jdbcType="TIMESTAMP"/>
		<result column="icp_filing" property="ICP" jdbcType="VARCHAR"/>
		<result column="up_time" property="upTime" jdbcType="TIMESTAMP"/>
		<result column="min_profit" property="feeRateMin" jdbcType="DECIMAL"/>
		<result column="max_profit" property="feeRateMax" jdbcType="DECIMAL"/>
	    <result column="min_dead_line" property="proDaysMin" jdbcType="INTEGER"/>
	    <result column="max_dead_line" property="proDaysMax" jdbcType="INTEGER"/>
	    <result column="trusteeship" property="trusteeship" jdbcType="VARCHAR"/>
		<result column="org_profile" property="orgProfile" jdbcType="LONGVARCHAR"/>
		<result column="org_security" property="orgSecurity" jdbcType="LONGVARCHAR"/>
	    <result column="min_fee_ratio" property="minFeeRatio" jdbcType="DECIMAL"/>
		<result column="max_fee_ratio" property="maxFeeRatio" jdbcType="DECIMAL"/>
		<result column="dead_line_min_self_defined" property="deadLineMinSelfDefined" jdbcType="VARCHAR"/>
		<result column="dead_line_max_self_defined" property="deadLineMaxSelfDefined" jdbcType="VARCHAR"/>
		<result column="org_fee_type" property="orgFeeType" jdbcType="INTEGER"/>
		<result column="org_amount_limit" property="orgAmountLimit" jdbcType="DECIMAL"/>
		<result column="org_investdeadline_limit" property="orgInvestdeadlineLimit" jdbcType="INTEGER"/>
		<result column="org_isstaticproduct" property="orgIsstaticproduct" jdbcType="INTEGER"/>
		<result column="org_advantage" property="orgAdvantage" jdbcType="VARCHAR"/>
		<result column="org_tag" property="orgTag" jdbcType="VARCHAR"/>
		<result column="org_product_tag" property="orgProductTag" jdbcType="VARCHAR"/>
		<result column="org_invest_strategy" property="orgInvestStrategy" jdbcType="LONGVARCHAR"/>
		<result column="org_planner_strategy" property="orgPlannerStrategy" jdbcType="LONGVARCHAR"/>
		<result column="org_honor" property="orgHonor" jdbcType="LONGVARCHAR"/>
		<result column="org_joint_type" property="orgJointType" jdbcType="INTEGER"/>
		
		<!-- 一对多的关系 -->
		<!--团队信息  property: 指的是集合属性的值, ofType：指的是集合中元素的类型 -->
		<collection property="teamInfos" ofType="com.eshop4j.web.model.CimOrgMemberInfo">
			<id column="tid" property="tid" jdbcType="INTEGER"/>
			<result column="org_icon" property="orgIcon" jdbcType="VARCHAR" />
			<result column="org_membergrade" property="orgMemberGrade" jdbcType="VARCHAR" />
			<result column="org_membername" property="orgMemberName" jdbcType="VARCHAR" />
			<result column="org_describe" property="orgDescribe" jdbcType="LONGVARCHAR" />
		</collection>
		
	</resultMap>
	
	
	<!-- PC端  平台详情 机构信息表与团队详情表 配置一对多关系映射 -->
	<resultMap type="com.eshop4j.web.model.cim.PcOrgInfo" id="PcCimOrgInfoDetails">
		<id column="id" property="id" jdbcType="INTEGER"/>
		<result column="org_number" property="orgNumber" jdbcType="VARCHAR"/>
		<result column="name" property="orgName" jdbcType="VARCHAR"/>
		<result column="grade" property="orgLevel" jdbcType="VARCHAR"/>
	    <result column="org_url" property="orgUrl" jdbcType="VARCHAR"/>
		<result column="context" property="orgBack" jdbcType="VARCHAR"/>
		<result column="capital" property="capital" jdbcType="VARCHAR"/>
		<result column="city" property="city" jdbcType="VARCHAR"/>
		<result column="up_time" property="upTime" jdbcType="TIMESTAMP"/>
		<result column="icp_filing" property="ICP" jdbcType="VARCHAR"/>
		<result column="up_time" property="upTime" jdbcType="TIMESTAMP"/>
		<result column="min_profit" property="feeRateMin" jdbcType="DECIMAL"/>
		<result column="max_profit" property="feeRateMax" jdbcType="DECIMAL"/>
	    <result column="min_dead_line" property="proDaysMin" jdbcType="INTEGER"/>
	    <result column="max_dead_line" property="proDaysMax" jdbcType="INTEGER"/>
	    <result column="trusteeship" property="trusteeship" jdbcType="VARCHAR"/>
		<result column="org_profile" property="orgProfile" jdbcType="LONGVARCHAR"/>
		<result column="org_security" property="orgSecurity" jdbcType="LONGVARCHAR"/>
	    <result column="min_fee_ratio" property="minFeeRatio" jdbcType="DECIMAL"/>
		<result column="max_fee_ratio" property="maxFeeRatio" jdbcType="DECIMAL"/>
		<result column="dead_line_min_self_defined" property="deadLineMinSelfDefined" jdbcType="VARCHAR"/>
		<result column="dead_line_max_self_defined" property="deadLineMaxSelfDefined" jdbcType="VARCHAR"/>
		<result column="org_fee_type" property="orgFeeType" jdbcType="INTEGER"/>
		<result column="org_amount_limit" property="orgAmountLimit" jdbcType="DECIMAL"/>
		<result column="org_investdeadline_limit" property="orgInvestdeadlineLimit" jdbcType="INTEGER"/>
		<result column="org_isstaticproduct" property="orgIsstaticproduct" jdbcType="INTEGER"/>
		<result column="org_advantage" property="orgAdvantage" jdbcType="VARCHAR"/>
		<result column="org_tag" property="orgTag" jdbcType="VARCHAR"/>
		<result column="org_product_tag" property="orgProductTag" jdbcType="VARCHAR"/>
		<result column="org_invest_tag" property="orgInvestTag" jdbcType="VARCHAR"/>
		<result column="org_investigation_report" property="orgInvestigationReport" jdbcType="VARCHAR"/>
		<result column="org_investigation_report_url" property="orgInvestigationReportUrl" jdbcType="VARCHAR"/>
		<result column="org_invest_strategy" property="orgInvestStrategy" jdbcType="LONGVARCHAR"/>
		<result column="org_planner_strategy" property="orgPlannerStrategy" jdbcType="LONGVARCHAR"/>
		<result column="org_joint_type" property="orgJointType" jdbcType="INTEGER"/>
		
		<result column="pc_platform_img" property="pcPlatformImg" jdbcType="VARCHAR"/>
		<result column="pc_platform_list_img" property="pcPlatformListImg" jdbcType="VARCHAR"/>
		<result column="pc_platform_detail_img" property="pcPlatformDetailImg" jdbcType="VARCHAR"/>
		
		<result column="org_debenture_transfer" property="orgDebentureTransfer" jdbcType="VARCHAR"/>
		<result column="org_bid_security" property="orgBidSecurity" jdbcType="VARCHAR"/>
		<result column="org_security_mode" property="orgSecurityMode" jdbcType="VARCHAR"/>
		<result column="org_website_records" property="orgWebsiteRecords" jdbcType="LONGVARCHAR"/>
		<result column="org_contact_details" property="orgContactDetails" jdbcType="LONGVARCHAR"/>
		
		<!-- 一对多的关系 -->
		<!--团队信息  property: 指的是集合属性的值, ofType：指的是集合中元素的类型 -->
		<collection property="teamInfos" ofType="com.eshop4j.web.model.CimOrgMemberInfo">
			<id column="tid" property="tid" jdbcType="INTEGER"/>
			<result column="org_icon" property="orgIcon" jdbcType="VARCHAR" />
			<result column="org_membergrade" property="orgMemberGrade" jdbcType="VARCHAR" />
			<result column="org_membername" property="orgMemberName" jdbcType="VARCHAR" />
			<result column="org_describe" property="orgDescribe" jdbcType="LONGVARCHAR" />
		</collection>
		
	</resultMap>
	
	<!-- 运营后台WEB端平台详情    机构信息表与团队详情表 配置一对多关系映射 -->
	<resultMap  type="com.eshop4j.web.model.cim.CimOrginfoWeb" id="CimOrgInfoWebDetails">
		<id column="id" property="id" jdbcType="INTEGER"/>
		<result column="org_number" property="orgNumber" jdbcType="VARCHAR"/>
		<result column="name" property="name" jdbcType="VARCHAR"/>
		<result column="org_account" property="orgAccount" jdbcType="VARCHAR"/>
		<result column="org_password" property="orgPassword" jdbcType="VARCHAR"/>
		<result column="context" property="context" jdbcType="VARCHAR"/>
		<result column="capital" property="capital" jdbcType="VARCHAR"/>
		<result column="up_time" property="upTime" jdbcType="TIMESTAMP"/>
		<result column="city" property="city" jdbcType="VARCHAR"/>
		<result column="icp_filing" property="icpFiling" jdbcType="VARCHAR"/>
		<result column="representative" property="representative" jdbcType="VARCHAR"/>
		<result column="contact" property="contact" jdbcType="VARCHAR"/>
		<result column="platform_ico" property="platformIco" jdbcType="VARCHAR"/>
		<result column="platformlist_ico" property="platformlistIco" jdbcType="VARCHAR"/>
		<result column="platform_detail_img" property="platformDetailImg" jdbcType="VARCHAR"/>
		<result column="business_license" property="businessLicense" jdbcType="VARCHAR"/>
		<result column="recommend" property="recommend" jdbcType="INTEGER"/>
		<result column="grade" property="grade" jdbcType="VARCHAR"/>
		<result column="top" property="top" jdbcType="INTEGER"/>
		<result column="homepage_sort" property="homepageSort" jdbcType="INTEGER"/>
		<result column="status" property="status" jdbcType="INTEGER"/>
		<result column="remark" property="remark" jdbcType="VARCHAR"/>
		<result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
		<result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
		<result column="min_profit" property="minProfit" jdbcType="DECIMAL"/>
		<result column="max_profit" property="maxProfit" jdbcType="DECIMAL"/>
		<result column="min_fee_ratio" property="minFeeRatio" jdbcType="DECIMAL"/>
		<result column="max_fee_ratio" property="maxFeeRatio" jdbcType="DECIMAL"/>
		<result column="min_dead_line" property="minDeadLine" jdbcType="INTEGER"/>
		<result column="max_dead_line" property="maxDeadLine" jdbcType="INTEGER"/>
		<result column="dead_line_min_self_defined" property="deadLineMinSelfDefined" jdbcType="VARCHAR"/>
		<result column="dead_line_max_self_defined" property="deadLineMaxSelfDefined" jdbcType="VARCHAR"/>
		<result column="org_url" property="orgUrl" jdbcType="VARCHAR"/>
		<result column="org_product_url" property="orgProductUrl" jdbcType="VARCHAR"/>
		<result column="org_usercenter_url" property="orgUsercenterUrl" jdbcType="VARCHAR"/>
		<result column="org_bind_user_url" property="orgBindUserUrl" jdbcType="VARCHAR"/>
		<result column="org_userbalance_url" property="orgUserbalanceUrl" jdbcType="VARCHAR"/>
		<result column="org_user_exist_url" property="orgUserExistUrl" jdbcType="VARCHAR"/>
		<result column="trusteeship" property="trusteeship" jdbcType="VARCHAR"/>
		<result column="org_profile" property="orgProfile" jdbcType="LONGVARCHAR"/>
		<result column="org_security" property="orgSecurity" jdbcType="LONGVARCHAR"/>
		<result column="org_fee_ratio" property="orgFeeRatio" jdbcType="DECIMAL"/>
		<result column="org_fee_type" property="orgFeeType" jdbcType="INTEGER"/>
		<result column="org_amount_limit" property="orgAmountLimit" jdbcType="DECIMAL"/>
		<result column="org_investdeadline_limit" property="orgInvestdeadlineLimit" jdbcType="INTEGER"/>
		<result column="org_creator" property="orgCreator" jdbcType="VARCHAR"/>
		<result column="org_updater" property="orgUpdater" jdbcType="VARCHAR"/>
		<result column="org_isstaticproduct" property="orgIsstaticproduct" jdbcType="INTEGER"/>
		<result column="org_advertisement" property="orgAdvertisement" jdbcType="VARCHAR"/>
		<!-- 一对多的关系 -->
		<!-- property: 指的是集合属性的值, ofType：指的是集合中元素的类型 -->
		<collection property="teams" ofType="com.eshop4j.web.model.CimOrgMemberInfo">
			<id column="tid" property="tid" jdbcType="INTEGER"/>
			<result column="org_icon" property="orgIcon" jdbcType="VARCHAR" />
			<result column="org_membergrade" property="orgMemberGrade" jdbcType="VARCHAR" />
			<result column="org_membername" property="orgMemberName" jdbcType="VARCHAR" />
			<result column="org_describe" property="orgDescribe" jdbcType="LONGVARCHAR" />
		</collection>
	</resultMap>
	
	<!-- 平台帐号管理列表  -->
	<resultMap  type="com.eshop4j.web.model.crm.PlatformAcctManagerListResp" id="PlatformAcctManagerListResp">
		<result column="org_name" property="orgName" jdbcType="VARCHAR"/>
		<result column="org_account" property="orgAccount" jdbcType="VARCHAR"/>
		<result column="is_new_user" property="isNewUser" jdbcType="INTEGER"/>
		<result column="creat_time" property="bindDate" jdbcType="TIMESTAMP"/>
		<result column="is_invested" property="isInvested" jdbcType="INTEGER"/>
		<result column="org_number" property="orgNumber" jdbcType="VARCHAR"/>
		<result column="org_isstaticproduct" property="orgIsstaticproduct" jdbcType="INTEGER"/>
		<result column="platformlist_ico" property="platformListIco" jdbcType="VARCHAR"/>
		<result column="min_profit" property="minProfit" jdbcType="DECIMAL"/>
		<result column="max_profit" property="maxProfit" jdbcType="DECIMAL"/>
		<result column="min_fee_ratio" property="minFeeRatio" jdbcType="DECIMAL"/>
		<result column="max_fee_ratio" property="maxFeeRatio" jdbcType="DECIMAL"/>
		<result column="dead_line_min_self_defined" property="deadLineMinSelfDefined" jdbcType="VARCHAR"/>
		<result column="dead_line_max_self_defined" property="deadLineMaxSelfDefined" jdbcType="VARCHAR"/>
		<result column="grade" property="grade" jdbcType="VARCHAR"/>
		<result column="investAmount" property="investAmount" jdbcType="DECIMAL"/>
		<result column="investCount" property="investCount" jdbcType="INTEGER"/>
		<result column="totalProfix" property="totalProfix" jdbcType="DECIMAL"/>
		<result column="cooperation_end_url" property="cooperationEndUrl" jdbcType="VARCHAR"/>
		<result column="status" property="status" jdbcType="INTEGER"/>
		<result column="org_advertisement" property="orgAdvertisement" jdbcType="VARCHAR"/>
	</resultMap>
	
	<!-- 平台跳转URL配置查询 -->
	<resultMap  type="com.eshop4j.web.model.CimOrgUrl" id="BaseResultUrl">
		<result column="org_product_url" property="orgProductUrl" jdbcType="VARCHAR"/>
		<result column="org_usercenter_url" property="orgUsercenterUrl" jdbcType="VARCHAR"/>
	</resultMap>
	
  <sql id="Base_Column_List">
    <trim suffixOverrides=",">
	    	id,
	    	org_number,
	    	name,
	    	org_account,
	    	org_password,
	    	context,
	    	capital,
	    	up_time,
	    	city,
	    	icp_filing,
	    	representative,
	    	contact,
	    	platform_ico,
	    	platformlist_ico,
	    	platform_detail_img,
	    	business_license,
	    	recommend,
	    	grade,
	    	top,
	    	homepage_sort,
	    	status,
	    	remark,
	    	create_time,
	    	update_time,
	    	min_profit,
	    	max_profit,
	    	min_fee_ratio,
	    	max_fee_ratio,
	    	min_dead_line,
	    	max_dead_line,
	    	dead_line_min_self_defined,
	    	dead_line_max_self_defined,
	    	org_url,
	    	org_product_url,
	    	org_usercenter_url,
	    	org_bind_user_url,
	    	org_user_exist_url,
	    	org_userbalance_url,
	    	trusteeship,
	    	org_profile,
	    	org_security,
	    	org_fee_ratio,
	    	org_fee_type,
	    	org_amount_limit,
	    	org_investdeadline_limit,
	    	org_creator,
	    	org_updater,
	    	org_isstaticproduct,
	    	org_advertisement,
	    	org_advantage,
	    	org_tag,
	    	org_product_tag,
	    	org_invest_strategy,
	    	org_planner_strategy,
	    	org_invest_tag,
	    	org_planner_tag,
	    	org_planner_product_tag,
	    	org_joint_type,
    </trim>
  </sql>
  
    <sql id="Base_Column_List_T">
    <trim suffixOverrides=",">
	    	t.id,
	    	t.org_number,
	    	t.name,
	    	t.org_account,
	    	t.org_password,
	    	t.context,
	    	t.capital,
	    	t.up_time,
	    	t.city,
	    	t.icp_filing,
	    	t.representative,
	    	t.contact,
	    	t.platform_ico,
	    	t.platformlist_ico,
	    	t.platform_detail_img,
	    	t.business_license,
	    	t.recommend,
	    	t.grade,
	    	t.top,
	    	t.homepage_sort,
	    	t.status,
	    	t.remark,
	    	t.create_time,
	    	t.update_time,
	    	t.min_profit,
	    	t.max_profit,
	    	t.min_fee_ratio,
	    	t.max_fee_ratio,
	    	t.min_dead_line,
	    	t.max_dead_line,
	    	t.dead_line_min_self_defined,
	    	t.dead_line_max_self_defined,
	    	t.org_url,
	    	t.org_product_url,
	    	t.org_usercenter_url,
	    	t.org_bind_user_url,
	    	t.org_user_exist_url,
	    	t.org_userbalance_url,
	    	t.trusteeship,
	    	t.org_profile,
	    	t.org_security,
	    	t.org_fee_ratio,
	    	t.org_fee_type,
	    	t.org_amount_limit,
	    	t.org_investdeadline_limit,
	    	t.org_creator,
	    	t.org_updater,
	    	t.org_isstaticproduct,
	    	t.org_advertisement,
	    	t.org_advantage,
	    	t.org_tag,
	    	t.org_product_tag,
	    	t.org_invest_strategy,
	    	t.org_planner_strategy,
	    	t.org_invest_tag,
	    	t.org_planner_tag,
	    	t.org_planner_product_tag,
	    	t.org_joint_type,
    </trim>
  </sql>   
  
  <sql id="Base_Condition">
		<if test=" null != id ">
			and id = #{id}
		</if>
		<if test=" null != orgNumber and ''!= orgNumber  ">
			and org_number = #{orgNumber}
		</if>
		<if test=" null != name and ''!= name  ">
			and name = #{name}
		</if>
		<if test=" null != orgAccount and ''!= orgAccount  ">
			and org_account = #{orgAccount}
		</if>
		<if test=" null != orgPassword and ''!= orgPassword  ">
			and org_password = #{orgPassword}
		</if>
		<if test=" null != context and ''!= context  ">
			and context = #{context}
		</if>
		<if test=" null != capital and ''!= capital  ">
			and capital = #{capital}
		</if>
		<if test=" null != upTime ">
			and up_time = #{upTime}
		</if>
		<if test=" null != city and ''!= city  ">
			and city = #{city}
		</if>
		<if test=" null != icpFiling and ''!= icpFiling  ">
			and icp_filing = #{icpFiling}
		</if>
		<if test=" null != representative and ''!= representative  ">
			and representative = #{representative}
		</if>
		<if test=" null != contact and ''!= contact  ">
			and contact = #{contact}
		</if>
		<if test=" null != platformIco and ''!= platformIco  ">
			and platform_ico = #{platformIco}
		</if>
		<if test=" null != platformlistIco and ''!= platformlistIco  ">
			and platformlist_ico = #{platformlistIco}
		</if>
		<if test=" null != platformDetailImg and ''!= platformDetailImg  ">
			and platform_detail_img = #{platformDetailImg}
		</if>
		<if test=" null != businessLicense and ''!= businessLicense  ">
			and business_license = #{businessLicense}
		</if>
		<if test=" null != recommend ">
			and recommend = #{recommend}
		</if>
		<if test=" null != grade and ''!= grade  ">
			and grade = #{grade}
		</if>
		<if test=" null != top ">
			and top = #{top}
		</if>
		<if test=" null != homepageSort ">
			and homepage_sort = #{homepageSort}
		</if>
		<if test=" null != status ">
			and status = #{status}
		</if>
		<if test=" null != remark and ''!= remark  ">
			and remark = #{remark}
		</if>
		<if test=" null != createTime ">
			and create_time = #{createTime}
		</if>
		<if test=" null != updateTime ">
			and update_time = #{updateTime}
		</if>
		<if test=" null != minProfit ">
			and min_profit = #{minProfit}
		</if>
		<if test=" null != maxProfit ">
			and max_profit = #{maxProfit}
		</if>
		<if test=" null != minFeeRatio ">
			and min_fee_ratio = #{minFeeRatio}
		</if>
		<if test=" null != maxFeeRatio ">
			and max_fee_ratio = #{maxFeeRatio}
		</if>
		<if test=" null != minDeadLine ">
			and min_dead_line = #{minDeadLine}
		</if>
		<if test=" null != maxDeadLine ">
			and max_dead_line = #{maxDeadLine}
		</if>
		<if test=" null != deadLineMinSelfDefined and ''!= deadLineMinSelfDefined  ">
			and dead_line_min_self_defined = #{deadLineMinSelfDefined}
		</if>
		<if test=" null != deadLineMaxSelfDefined and ''!= deadLineMaxSelfDefined  ">
			and dead_line_max_self_defined = #{deadLineMaxSelfDefined}
		</if>
		<if test=" null != orgUrl and ''!= orgUrl  ">
			and org_url = #{orgUrl}
		</if>
		<if test=" null != orgProductUrl and ''!= orgProductUrl  ">
			and org_product_url = #{orgProductUrl}
		</if>
		<if test=" null != orgUsercenterUrl and ''!= orgUsercenterUrl  ">
			and org_usercenter_url = #{orgUsercenterUrl}
		</if>
		<if test=" null != orgBindUserUrl and ''!= orgBindUserUrl  ">
			and org_bind_user_url = #{orgBindUserUrl}
		</if>
		<if test=" null != orgUserbalanceUrl and ''!= orgUserbalanceUrl  ">
			and org_userbalance_url = #{orgUserbalanceUrl}
		</if>
		<if test=" null != trusteeship and ''!= trusteeship  ">
			and trusteeship = #{trusteeship}
		</if>
		<if test=" null != orgProfile and ''!= orgProfile  ">
			and org_profile = #{orgProfile}
		</if>
		<if test=" null != orgSecurity and ''!= orgSecurity  ">
			and org_security = #{orgSecurity}
		</if>
		<if test=" null != orgFeeRatio ">
			and org_fee_ratio = #{orgFeeRatio}
		</if>
		<if test=" null != orgFeeType ">
			and org_fee_type = #{orgFeeType}
		</if>
		<if test=" null != orgAmountLimit ">
			and org_amount_limit = #{orgAmountLimit}
		</if>
		<if test=" null != orgInvestdeadlineLimit ">
			and org_investdeadline_limit = #{orgInvestdeadlineLimit}
		</if>
		<if test=" null != orgIsstaticproduct ">
			and org_isstaticproduct = #{orgIsstaticproduct}
		</if>
  </sql>
  
  <select id="selectOneByCondition" resultMap="BaseResultMap"  parameterType="com.eshop4j.web.model.CimOrginfo">
		select <include refid="Base_Column_List" /> from tcim_org_info 
		where 1=1 <include refid="Base_Condition" />
  </select>
  
  <select id="selectByCondition" resultMap="BaseResultMap"  parameterType="com.eshop4j.web.model.CimOrginfo">
		select <include refid="Base_Column_List" /> from tcim_org_info 
		where 1=1 <include refid="Base_Condition" />
  </select>

<!-- 通过主键id查询机构信息 -->
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    select 
    <include refid="Base_Column_List" />
    from tcim_org_info
    where  id = #{0}
  </select>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    delete from tcim_org_info
    where id = #{0}
  </delete>
  
  <!-- 通过平台编码查询机构URL信息 -->
  <select id="selectOrgUrlByOrgNumber" resultMap="BaseResultUrl">
    select 
    	org_product_url,
	    org_usercenter_url
    from tcim_org_info
    where  org_number = #{orgNo}
  </select>
  
  <!-- 通过平台编码查询机构信息 -->
  <select id="selectOrgInfoByOrgNumber" resultMap="WebBaseResultMap">
    select 
    	 <include refid="Base_Column_List" />
    from tcim_org_info
    where  org_number = #{orgNo}
  </select>
  
  
  <!-- 插入数据并返回主键自增的id -->
  <insert id="insertOrginfo" parameterType="com.eshop4j.web.model.cim.CimOrginfoWeb" useGeneratedKeys="true" keyProperty="id" >
		INSERT INTO tcim_org_info
		<trim prefix="(" suffix=")" suffixOverrides=",">
			 	<if test=" null != id ">
					id,
				</if>
			 	<if test=" null != orgNumber and ''!= orgNumber  ">
					org_number,
				</if>
			 	<if test=" null != name and ''!= name  ">
					name,
				</if>
			 	<if test=" null != orgAccount and ''!= orgAccount  ">
					org_account,
				</if>
			 	<if test=" null != orgPassword and ''!= orgPassword  ">
					org_password,
				</if>
			 	<if test=" null != context and ''!= context  ">
					context,
				</if>
			 	<if test=" null != capital and ''!= capital  ">
					capital,
				</if>
			 	<if test=" null != upTime ">
					up_time,
				</if>
			 	<if test=" null != city and ''!= city  ">
					city,
				</if>
			 	<if test=" null != icpFiling and ''!= icpFiling  ">
					icp_filing,
				</if>
			 	<if test=" null != representative and ''!= representative  ">
					representative,
				</if>
			 	<if test=" null != contact and ''!= contact  ">
					contact,
				</if>
			 	<if test=" null != platformIco and ''!= platformIco  ">
					platform_ico,
				</if>
			 	<if test=" null != platformlistIco and ''!= platformlistIco  ">
					platformlist_ico,
				</if>
			 	<if test=" null != platformDetailImg and ''!= platformDetailImg  ">
					platform_detail_img,
				</if>
			 	<if test=" null != businessLicense and ''!= businessLicense  ">
					business_license,
				</if>
			 	<if test=" null != recommend ">
					recommend,
				</if>
			 	<if test=" null != grade and ''!= grade  ">
					grade,
				</if>
			 	<if test=" null != top ">
					top,
				</if>
			 	<if test=" null != homepageSort ">
					homepage_sort,
				</if>
			 	<if test=" null != status ">
					status,
				</if>
			 	<if test=" null != remark and ''!= remark  ">
					remark,
				</if>
			 	<if test=" null != createTime ">
					create_time,
				</if>
			 	<if test=" null != updateTime ">
					update_time,
				</if>
			 	<if test=" null != minProfit ">
					min_profit,
				</if>
			 	<if test=" null != maxProfit ">
					max_profit,
				</if>
			 	<if test=" null != minFeeRatio ">
					min_fee_ratio,
				</if>
			 	<if test=" null != maxFeeRatio ">
					max_fee_ratio,
				</if>
			 	<if test=" null != minDeadLine ">
					min_dead_line,
				</if>
			 	<if test=" null != maxDeadLine ">
					max_dead_line,
				</if>
			 	<if test=" null != deadLineMinSelfDefined and ''!= deadLineMinSelfDefined  ">
					dead_line_min_self_defined,
				</if>
			 	<if test=" null != deadLineMaxSelfDefined and ''!= deadLineMaxSelfDefined  ">
					dead_line_max_self_defined,
				</if>
			 	<if test=" null != orgUrl and ''!= orgUrl  ">
					org_url,
				</if>
			 	<if test=" null != orgProductUrl and ''!= orgProductUrl  ">
					org_product_url,
				</if>
			 	<if test=" null != orgUsercenterUrl and ''!= orgUsercenterUrl  ">
					org_usercenter_url,
				</if>
			 	<if test=" null != orgBindUserUrl and ''!= orgBindUserUrl  ">
					org_bind_user_url,
				</if>
			 	<if test=" null != orgUserbalanceUrl and ''!= orgUserbalanceUrl  ">
					org_userbalance_url,
				</if>
				<if test=" null != orgUserExistUrl and ''!= orgUserExistUrl  ">
					org_user_exist_url,
				</if>
			 	<if test=" null != trusteeship and ''!= trusteeship  ">
					trusteeship,
				</if>
			 	<if test=" null != orgProfile and ''!= orgProfile  ">
					org_profile,
				</if>
			 	<if test=" null != orgSecurity and ''!= orgSecurity  ">
					org_security,
				</if>
			 	<if test=" null != orgFeeRatio ">
					org_fee_ratio,
				</if>
			 	<if test=" null != orgFeeType ">
					org_fee_type,
				</if>
			 	<if test=" null != orgAmountLimit ">
					org_amount_limit,
				</if>
			 	<if test=" null != orgInvestdeadlineLimit ">
					org_investdeadline_limit,
				</if>
				<if test=" null != orgCreator and ''!= orgCreator  ">
					org_creator,
				</if>
			 	<if test=" null != orgUpdater and ''!= orgUpdater  ">
					org_updater,
				</if>
				<if test=" null != orgIsstaticproduct ">
					org_isstaticproduct,
				</if>
				<if test=" null != orgAdvertisement and ''!= orgAdvertisement  ">
					org_advertisement,
				</if>
		</trim>
		<trim prefix="VALUES(" suffix=")" suffixOverrides=",">
			 	<if test=" null != id ">
					 	#{id},
				</if>
			 	<if test=" null != orgNumber and ''!= orgNumber  ">
					 	#{orgNumber},
				</if>
			 	<if test=" null != name and ''!= name  ">
					 	#{name},
				</if>
			 	<if test=" null != orgAccount and ''!= orgAccount  ">
					 	#{orgAccount},
				</if>
			 	<if test=" null != orgPassword and ''!= orgPassword  ">
					 	#{orgPassword},
				</if>
			 	<if test=" null != context and ''!= context  ">
					 	#{context},
				</if>
			 	<if test=" null != capital and ''!= capital  ">
					 	#{capital},
				</if>
			 	<if test=" null != upTime ">
					 	#{upTime},
				</if>
			 	<if test=" null != city and ''!= city  ">
					 	#{city},
				</if>
			 	<if test=" null != icpFiling and ''!= icpFiling  ">
					 	#{icpFiling},
				</if>
			 	<if test=" null != representative and ''!= representative  ">
					 	#{representative},
				</if>
			 	<if test=" null != contact and ''!= contact  ">
					 	#{contact},
				</if>
			 	<if test=" null != platformIco and ''!= platformIco  ">
					 	#{platformIco},
				</if>
			 	<if test=" null != platformlistIco and ''!= platformlistIco  ">
					 	#{platformlistIco},
				</if>
			 	<if test=" null != platformDetailImg and ''!= platformDetailImg  ">
					 	#{platformDetailImg},
				</if>
			 	<if test=" null != businessLicense and ''!= businessLicense  ">
					 	#{businessLicense},
				</if>
			 	<if test=" null != recommend ">
					 	#{recommend},
				</if>
			 	<if test=" null != grade and ''!= grade  ">
					 	#{grade},
				</if>
			 	<if test=" null != top ">
					 	#{top},
				</if>
			 	<if test=" null != homepageSort ">
					 	#{homepageSort},
				</if>
			 	<if test=" null != status ">
					 	#{status},
				</if>
			 	<if test=" null != remark and ''!= remark  ">
					 	#{remark},
				</if>
			 	<if test=" null != createTime ">
					 	#{createTime},
				</if>
			 	<if test=" null != updateTime ">
					 	#{updateTime},
				</if>
			 	<if test=" null != minProfit ">
					 	#{minProfit},
				</if>
			 	<if test=" null != maxProfit ">
					 	#{maxProfit},
				</if>
			 	<if test=" null != minFeeRatio ">
					 	#{minFeeRatio},
				</if>
			 	<if test=" null != maxFeeRatio ">
					 	#{maxFeeRatio},
				</if>
			 	<if test=" null != minDeadLine ">
					 	#{minDeadLine},
				</if>
			 	<if test=" null != maxDeadLine ">
					 	#{maxDeadLine},
				</if>
			 	<if test=" null != deadLineMinSelfDefined and ''!= deadLineMinSelfDefined  ">
					 	#{deadLineMinSelfDefined},
				</if>
			 	<if test=" null != deadLineMaxSelfDefined and ''!= deadLineMaxSelfDefined  ">
					 	#{deadLineMaxSelfDefined},
				</if>
			 	<if test=" null != orgUrl and ''!= orgUrl  ">
					 	#{orgUrl},
				</if>
			 	<if test=" null != orgProductUrl and ''!= orgProductUrl  ">
					 	#{orgProductUrl},
				</if>
			 	<if test=" null != orgUsercenterUrl and ''!= orgUsercenterUrl  ">
					 	#{orgUsercenterUrl},
				</if>
			 	<if test=" null != orgBindUserUrl and ''!= orgBindUserUrl  ">
					 	#{orgBindUserUrl},
				</if>
			 	<if test=" null != orgUserbalanceUrl and ''!= orgUserbalanceUrl  ">
					 	#{orgUserbalanceUrl},
				</if>
				<if test=" null != orgUserExistUrl and ''!= orgUserExistUrl  ">
						#{orgUserExistUrl},
				</if>
			 	<if test=" null != trusteeship and ''!= trusteeship  ">
					 	#{trusteeship},
				</if>
			 	<if test=" null != orgProfile and ''!= orgProfile  ">
					 	#{orgProfile},
				</if>
			 	<if test=" null != orgSecurity and ''!= orgSecurity  ">
					 	#{orgSecurity},
				</if>
			 	<if test=" null != orgFeeRatio ">
					 	#{orgFeeRatio},
				</if>
			 	<if test=" null != orgFeeType ">
					 	#{orgFeeType},
				</if>
			 	<if test=" null != orgAmountLimit ">
					 	#{orgAmountLimit},
				</if>
			 	<if test=" null != orgInvestdeadlineLimit ">
					 	#{orgInvestdeadlineLimit},
				</if>
				<if test=" null != orgCreator and ''!= orgCreator  ">
					 	#{orgCreator},
				</if>
			 	<if test=" null != orgUpdater and ''!= orgUpdater  ">
					 	#{orgUpdater},
				</if>
				<if test=" null != orgIsstaticproduct ">
					#{orgIsstaticproduct},
				</if>
				<if test=" null != orgAdvertisement and ''!= orgAdvertisement  ">
					#{orgAdvertisement},
				</if>
		</trim>
	</insert>
	
  <!-- 插入数据并返回主键自增的id -->
  <insert id="insertSelective" parameterType="com.eshop4j.web.model.CimOrginfo" useGeneratedKeys="true" keyProperty="id" >
		INSERT INTO tcim_org_info
		<trim prefix="(" suffix=")" suffixOverrides=",">
			 	<if test=" null != id ">
					id,
				</if>
			 	<if test=" null != orgNumber and ''!= orgNumber  ">
					org_number,
				</if>
			 	<if test=" null != name and ''!= name  ">
					name,
				</if>
			 	<if test=" null != orgAccount and ''!= orgAccount  ">
					org_account,
				</if>
			 	<if test=" null != orgPassword and ''!= orgPassword  ">
					org_password,
				</if>
			 	<if test=" null != context and ''!= context  ">
					context,
				</if>
			 	<if test=" null != capital and ''!= capital  ">
					capital,
				</if>
			 	<if test=" null != upTime ">
					up_time,
				</if>
			 	<if test=" null != city and ''!= city  ">
					city,
				</if>
			 	<if test=" null != icpFiling and ''!= icpFiling  ">
					icp_filing,
				</if>
			 	<if test=" null != representative and ''!= representative  ">
					representative,
				</if>
			 	<if test=" null != contact and ''!= contact  ">
					contact,
				</if>
			 	<if test=" null != platformIco and ''!= platformIco  ">
					platform_ico,
				</if>
			 	<if test=" null != platformlistIco and ''!= platformlistIco  ">
					platformlist_ico,
				</if>
			 	<if test=" null != platformDetailImg and ''!= platformDetailImg  ">
					platform_detail_img,
				</if>
			 	<if test=" null != businessLicense and ''!= businessLicense  ">
					business_license,
				</if>
			 	<if test=" null != recommend ">
					recommend,
				</if>
			 	<if test=" null != grade and ''!= grade  ">
					grade,
				</if>
			 	<if test=" null != top ">
					top,
				</if>
			 	<if test=" null != homepageSort ">
					homepage_sort,
				</if>
			 	<if test=" null != status ">
					status,
				</if>
			 	<if test=" null != remark and ''!= remark  ">
					remark,
				</if>
			 	<if test=" null != createTime ">
					create_time,
				</if>
			 	<if test=" null != updateTime ">
					update_time,
				</if>
			 	<if test=" null != minProfit ">
					min_profit,
				</if>
			 	<if test=" null != maxProfit ">
					max_profit,
				</if>
			 	<if test=" null != minFeeRatio ">
					min_fee_ratio,
				</if>
			 	<if test=" null != maxFeeRatio ">
					max_fee_ratio,
				</if>
			 	<if test=" null != minDeadLine ">
					min_dead_line,
				</if>
			 	<if test=" null != maxDeadLine ">
					max_dead_line,
				</if>
			 	<if test=" null != deadLineMinSelfDefined and ''!= deadLineMinSelfDefined  ">
					dead_line_min_self_defined,
				</if>
			 	<if test=" null != deadLineMaxSelfDefined and ''!= deadLineMaxSelfDefined  ">
					dead_line_max_self_defined,
				</if>
			 	<if test=" null != orgUrl and ''!= orgUrl  ">
					org_url,
				</if>
			 	<if test=" null != orgProductUrl and ''!= orgProductUrl  ">
					org_product_url,
				</if>
			 	<if test=" null != orgUsercenterUrl and ''!= orgUsercenterUrl  ">
					org_usercenter_url,
				</if>
			 	<if test=" null != orgBindUserUrl and ''!= orgBindUserUrl  ">
					org_bind_user_url,
				</if>
			 	<if test=" null != orgUserbalanceUrl and ''!= orgUserbalanceUrl  ">
					org_userbalance_url,
				</if>
			 	<if test=" null != trusteeship and ''!= trusteeship  ">
					trusteeship,
				</if>
			 	<if test=" null != orgProfile and ''!= orgProfile  ">
					org_profile,
				</if>
			 	<if test=" null != orgSecurity and ''!= orgSecurity  ">
					org_security,
				</if>
			 	<if test=" null != orgFeeRatio ">
					org_fee_ratio,
				</if>
			 	<if test=" null != orgFeeType ">
					org_fee_type,
				</if>
			 	<if test=" null != orgAmountLimit ">
					org_amount_limit,
				</if>
			 	<if test=" null != orgInvestdeadlineLimit ">
					org_investdeadline_limit,
				</if>
		</trim>
		<trim prefix="VALUES(" suffix=")" suffixOverrides=",">
			 	<if test=" null != id ">
					 	#{id},
				</if>
			 	<if test=" null != orgNumber and ''!= orgNumber  ">
					 	#{orgNumber},
				</if>
			 	<if test=" null != name and ''!= name  ">
					 	#{name},
				</if>
			 	<if test=" null != orgAccount and ''!= orgAccount  ">
					 	#{orgAccount},
				</if>
			 	<if test=" null != orgPassword and ''!= orgPassword  ">
					 	#{orgPassword},
				</if>
			 	<if test=" null != context and ''!= context  ">
					 	#{context},
				</if>
			 	<if test=" null != capital and ''!= capital  ">
					 	#{capital},
				</if>
			 	<if test=" null != upTime ">
					 	#{upTime},
				</if>
			 	<if test=" null != city and ''!= city  ">
					 	#{city},
				</if>
			 	<if test=" null != icpFiling and ''!= icpFiling  ">
					 	#{icpFiling},
				</if>
			 	<if test=" null != representative and ''!= representative  ">
					 	#{representative},
				</if>
			 	<if test=" null != contact and ''!= contact  ">
					 	#{contact},
				</if>
			 	<if test=" null != platformIco and ''!= platformIco  ">
					 	#{platformIco},
				</if>
			 	<if test=" null != platformlistIco and ''!= platformlistIco  ">
					 	#{platformlistIco},
				</if>
			 	<if test=" null != platformDetailImg and ''!= platformDetailImg  ">
					 	#{platformDetailImg},
				</if>
			 	<if test=" null != businessLicense and ''!= businessLicense  ">
					 	#{businessLicense},
				</if>
			 	<if test=" null != recommend ">
					 	#{recommend},
				</if>
			 	<if test=" null != grade and ''!= grade  ">
					 	#{grade},
				</if>
			 	<if test=" null != top ">
					 	#{top},
				</if>
			 	<if test=" null != homepageSort ">
					 	#{homepageSort},
				</if>
			 	<if test=" null != status ">
					 	#{status},
				</if>
			 	<if test=" null != remark and ''!= remark  ">
					 	#{remark},
				</if>
			 	<if test=" null != createTime ">
					 	#{createTime},
				</if>
			 	<if test=" null != updateTime ">
					 	#{updateTime},
				</if>
			 	<if test=" null != minProfit ">
					 	#{minProfit},
				</if>
			 	<if test=" null != maxProfit ">
					 	#{maxProfit},
				</if>
			 	<if test=" null != minFeeRatio ">
					 	#{minFeeRatio},
				</if>
			 	<if test=" null != maxFeeRatio ">
					 	#{maxFeeRatio},
				</if>
			 	<if test=" null != minDeadLine ">
					 	#{minDeadLine},
				</if>
			 	<if test=" null != maxDeadLine ">
					 	#{maxDeadLine},
				</if>
			 	<if test=" null != deadLineMinSelfDefined and ''!= deadLineMinSelfDefined  ">
					 	#{deadLineMinSelfDefined},
				</if>
			 	<if test=" null != deadLineMaxSelfDefined and ''!= deadLineMaxSelfDefined  ">
					 	#{deadLineMaxSelfDefined},
				</if>
			 	<if test=" null != orgUrl and ''!= orgUrl  ">
					 	#{orgUrl},
				</if>
			 	<if test=" null != orgProductUrl and ''!= orgProductUrl  ">
					 	#{orgProductUrl},
				</if>
			 	<if test=" null != orgUsercenterUrl and ''!= orgUsercenterUrl  ">
					 	#{orgUsercenterUrl},
				</if>
			 	<if test=" null != orgBindUserUrl and ''!= orgBindUserUrl  ">
					 	#{orgBindUserUrl},
				</if>
			 	<if test=" null != orgUserbalanceUrl and ''!= orgUserbalanceUrl  ">
					 	#{orgUserbalanceUrl},
				</if>
			 	<if test=" null != trusteeship and ''!= trusteeship  ">
					 	#{trusteeship},
				</if>
			 	<if test=" null != orgProfile and ''!= orgProfile  ">
					 	#{orgProfile},
				</if>
			 	<if test=" null != orgSecurity and ''!= orgSecurity  ">
					 	#{orgSecurity},
				</if>
			 	<if test=" null != orgFeeRatio ">
					 	#{orgFeeRatio},
				</if>
			 	<if test=" null != orgFeeType ">
					 	#{orgFeeType},
				</if>
			 	<if test=" null != orgAmountLimit ">
					 	#{orgAmountLimit},
				</if>
			 	<if test=" null != orgInvestdeadlineLimit ">
					 	#{orgInvestdeadlineLimit},
				</if>
		</trim>
	</insert>
  
  
  
  <!-- 通过机构主键id更新机构信息 -->
  <update id="updateByPrimaryKeySelective" parameterType="com.eshop4j.web.model.CimOrginfo" >
  		UPDATE tcim_org_info
		<set>
			<trim suffixOverrides=",">
					<if test=" null != name and ''!= name  ">
						name = #{name},
					</if>
					<!-- 
					<if test=" null != orgNumber and ''!= orgNumber  ">
						org_number = #{orgNumber},
					</if>
					<if test=" null != orgAccount and ''!= orgAccount  ">
						org_account = #{orgAccount},
					</if>
					-->
					<if test=" null != orgPassword and ''!= orgPassword  ">
						org_password = #{orgPassword},
					</if>
					<if test=" null != context and ''!= context  ">
						context = #{context},
					</if>
					<if test=" null != capital and ''!= capital  ">
						capital = #{capital},
					</if>
					<if test=" null != upTime ">
						up_time = #{upTime},
					</if>
					<if test=" null != city and ''!= city  ">
						city = #{city},
					</if>
					<if test=" null != icpFiling and ''!= icpFiling  ">
						icp_filing = #{icpFiling},
					</if>
					<if test=" null != representative and ''!= representative  ">
						representative = #{representative},
					</if>
					<if test=" null != contact and ''!= contact  ">
						contact = #{contact},
					</if>
					<if test=" null != platformIco and ''!= platformIco  ">
						platform_ico = #{platformIco},
					</if>
					<if test=" null != platformlistIco and ''!= platformlistIco  ">
						platformlist_ico = #{platformlistIco},
					</if>
					<if test=" null != platformDetailImg and ''!= platformDetailImg  ">
						platform_detail_img = #{platformDetailImg},
					</if>
					<if test=" null != businessLicense and ''!= businessLicense  ">
						business_license = #{businessLicense},
					</if>
					<if test=" null != recommend ">
						recommend = #{recommend},
					</if>
					<if test=" null != grade and ''!= grade  ">
						grade = #{grade},
					</if>
					<if test=" null != top ">
						top = #{top},
					</if>
					<if test=" null != homepageSort ">
						homepage_sort = #{homepageSort},
					</if>
					<if test=" null != status ">
						status = #{status},
					</if>
					<if test=" null != remark and ''!= remark  ">
						remark = #{remark},
					</if>
					<if test=" null != createTime ">
						create_time = #{createTime},
					</if>
					<if test=" null != updateTime ">
						update_time = #{updateTime},
					</if>
					<if test=" null != minProfit ">
						min_profit = #{minProfit},
					</if>
					<if test=" null != maxProfit ">
						max_profit = #{maxProfit},
					</if>
					<if test=" null != minFeeRatio ">
						min_fee_ratio = #{minFeeRatio},
					</if>
					<if test=" null != maxFeeRatio ">
						max_fee_ratio = #{maxFeeRatio},
					</if>
					<if test=" null != minDeadLine ">
						min_dead_line = #{minDeadLine},
					</if>
					<if test=" null != maxDeadLine ">
						max_dead_line = #{maxDeadLine},
					</if>
					<if test=" null != deadLineMinSelfDefined and ''!= deadLineMinSelfDefined  ">
						dead_line_min_self_defined = #{deadLineMinSelfDefined},
					</if>
					<if test=" null != deadLineMaxSelfDefined and ''!= deadLineMaxSelfDefined  ">
						dead_line_max_self_defined = #{deadLineMaxSelfDefined},
					</if>
					<if test=" null != orgUrl and ''!= orgUrl  ">
						org_url = #{orgUrl},
					</if>
					<if test=" null != orgProductUrl and ''!= orgProductUrl  ">
						org_product_url = #{orgProductUrl},
					</if>
					<if test=" null != orgUsercenterUrl and ''!= orgUsercenterUrl  ">
						org_usercenter_url = #{orgUsercenterUrl},
					</if>
					<if test=" null != orgBindUserUrl and ''!= orgBindUserUrl  ">
						org_bind_user_url = #{orgBindUserUrl},
					</if>
					<if test=" null != orgUserbalanceUrl and ''!= orgUserbalanceUrl  ">
						org_userbalance_url = #{orgUserbalanceUrl},
					</if>
					<if test=" null != trusteeship and ''!= trusteeship  ">
						trusteeship = #{trusteeship},
					</if>
					<if test=" null != orgProfile and ''!= orgProfile  ">
						org_profile = #{orgProfile},
					</if>
					<if test=" null != orgSecurity and ''!= orgSecurity  ">
						org_security = #{orgSecurity},
					</if>
					<if test=" null != orgFeeRatio ">
						org_fee_ratio = #{orgFeeRatio},
					</if>
					<if test=" null != orgFeeType ">
						org_fee_type = #{orgFeeType},
					</if>
					<if test=" null != orgAmountLimit ">
						org_amount_limit = #{orgAmountLimit},
					</if>
					<if test=" null != orgInvestdeadlineLimit ">
						org_investdeadline_limit = #{orgInvestdeadlineLimit},
					</if>
					
					<if test=" null != orgAdvantage and ''!= orgAdvantage  ">
						org_advantage = #{orgAdvantage},
					</if>
					<if test=" null != orgTag and ''!= orgTag  ">
						org_tag = #{orgTag},
					</if>
					<if test=" null != orgProductTag and ''!= orgProductTag  ">
						org_product_tag = #{orgProductTag},
					</if>
			</trim>
		</set>
		<where>
			 id = #{id}
		</where>
	</update>
	
	
  <!-- 通过机构编码更新机构信息 -->
  <update id="updateByOrgNumber" parameterType="com.eshop4j.web.model.cim.CimOrginfoWeb" >
  		UPDATE tcim_org_info
		<set>
			<trim suffixOverrides=",">
					<if test=" null != name and ''!= name  ">
						name = #{name},
					</if>
					<!-- 
					<if test=" null != orgNumber and ''!= orgNumber  ">
						org_number = #{orgNumber},
					</if>
					<if test=" null != orgAccount and ''!= orgAccount  ">
						org_account = #{orgAccount},
					</if>
					-->
					<if test=" null != orgPassword and ''!= orgPassword  ">
						org_password = #{orgPassword},
					</if>
					<if test=" null != context and ''!= context  ">
						context = #{context},
					</if>
					<if test=" null != capital and ''!= capital  ">
						capital = #{capital},
					</if>
					<if test=" null != upTime ">
						up_time = #{upTime},
					</if>
					<if test=" null != city and ''!= city  ">
						city = #{city},
					</if>
					<if test=" null != icpFiling and ''!= icpFiling  ">
						icp_filing = #{icpFiling},
					</if>
					<if test=" null != representative and ''!= representative  ">
						representative = #{representative},
					</if>
					<if test=" null != contact and ''!= contact  ">
						contact = #{contact},
					</if>
					<if test=" null != platformIco and ''!= platformIco  ">
						platform_ico = #{platformIco},
					</if>
					<if test=" null != platformlistIco and ''!= platformlistIco  ">
						platformlist_ico = #{platformlistIco},
					</if>
					<if test=" null != platformDetailImg and ''!= platformDetailImg  ">
						platform_detail_img = #{platformDetailImg},
					</if>
					<if test=" null != businessLicense and ''!= businessLicense  ">
						business_license = #{businessLicense},
					</if>
					<if test=" null != recommend ">
						recommend = #{recommend},
					</if>
					<if test=" null != grade and ''!= grade  ">
						grade = #{grade},
					</if>
					<if test=" null != top ">
						top = #{top},
					</if>
					<if test=" null != homepageSort ">
						homepage_sort = #{homepageSort},
					</if>
					<if test=" null != status ">
						status = #{status},
					</if>
					<if test=" null != remark and ''!= remark  ">
						remark = #{remark},
					</if>
					<if test=" null != createTime ">
						create_time = #{createTime},
					</if>
					<if test=" null != updateTime ">
						update_time = #{updateTime},
					</if>
					<if test=" null != minProfit ">
						min_profit = #{minProfit},
					</if>
					<if test=" null != maxProfit ">
						max_profit = #{maxProfit},
					</if>
					<if test=" null != minFeeRatio ">
						min_fee_ratio = #{minFeeRatio},
					</if>
					<if test=" null != maxFeeRatio ">
						max_fee_ratio = #{maxFeeRatio},
					</if>
					<if test=" null != minDeadLine ">
						min_dead_line = #{minDeadLine},
					</if>
					<if test=" null != maxDeadLine ">
						max_dead_line = #{maxDeadLine},
					</if>
					<if test=" null != deadLineMinSelfDefined and ''!= deadLineMinSelfDefined  ">
						dead_line_min_self_defined = #{deadLineMinSelfDefined},
					</if>
					<if test=" null != deadLineMaxSelfDefined and ''!= deadLineMaxSelfDefined  ">
						dead_line_max_self_defined = #{deadLineMaxSelfDefined},
					</if>
					<if test=" null != orgUrl and ''!= orgUrl  ">
						org_url = #{orgUrl},
					</if>
					<if test=" null != orgProductUrl and ''!= orgProductUrl  ">
						org_product_url = #{orgProductUrl},
					</if>
					<if test=" null != orgUsercenterUrl and ''!= orgUsercenterUrl  ">
						org_usercenter_url = #{orgUsercenterUrl},
					</if>
					<if test=" null != orgBindUserUrl and ''!= orgBindUserUrl  ">
						org_bind_user_url = #{orgBindUserUrl},
					</if>
					<if test=" null != orgUserbalanceUrl and ''!= orgUserbalanceUrl  ">
						org_userbalance_url = #{orgUserbalanceUrl},
					</if>
					<if test=" null != orgUserExistUrl and ''!= orgUserExistUrl  ">
						org_user_exist_url = #{orgUserExistUrl},
					</if>
					<if test=" null != trusteeship and ''!= trusteeship  ">
						trusteeship = #{trusteeship},
					</if>
					<if test=" null != orgProfile and ''!= orgProfile  ">
						org_profile = #{orgProfile},
					</if>
					<if test=" null != orgSecurity and ''!= orgSecurity  ">
						org_security = #{orgSecurity},
					</if>
					<if test=" null != orgFeeRatio ">
						org_fee_ratio = #{orgFeeRatio},
					</if>
					<if test=" null != orgFeeType ">
						org_fee_type = #{orgFeeType},
					</if>
					<if test=" null != orgAmountLimit ">
						org_amount_limit = #{orgAmountLimit},
					</if>
					<if test=" null != orgInvestdeadlineLimit ">
						org_investdeadline_limit = #{orgInvestdeadlineLimit},
					</if>
					<if test=" null != orgCreator and ''!= orgCreator  ">
						org_creator = #{orgCreator},
					</if>
					<if test=" null != orgUpdater and ''!= orgUpdater  ">
						org_updater = #{orgUpdater},
					</if>
					<if test=" null != orgIsstaticproduct ">
						org_isstaticproduct = #{orgIsstaticproduct},
					</if>
					<if test=" null != orgAdvertisement and ''!= orgAdvertisement  ">
						org_advertisement = #{orgAdvertisement},
					</if>
					
					<if test=" null != orgAdvantage and ''!= orgAdvantage  ">
						org_advantage = #{orgAdvantage},
					</if>
					<if test=" null != orgTag and ''!= orgTag  ">
						org_tag = #{orgTag},
					</if>
					<if test=" null != orgProductTag and ''!= orgProductTag  ">
						org_product_tag = #{orgProductTag},
					</if>
			</trim>
		</set>
		<where>
			 org_number = #{orgNumber}
		</where>
	</update>

  <!-- 分页条件查询 -->
  <select id="selectBySearchInfo" resultMap="WebBaseResultMap" parameterType="com.eshop4j.core.datatable.DataTable">
        SELECT
        <include refid="Base_Column_List" />
        FROM tcim_org_info
        <where> 
        <if test="dt.search!=null">  
                name LIKE CONCAT('%','${dt.search.value}','%' )  
         </if>  
         <if test="dt.order!=null">  
               <foreach collection="dt.order" index="index" item="item"
                    open="order by" separator="," close=" ">
                    ${item.name} ${item.dir} 
                </foreach>
         </if>  
        </where>
    </select>
    
    <!-- APP平台列表分页 -->
    <select id="queryCimOrginfoList" resultMap="BaseResultMap">
	   SELECT 
	    	o.org_number,
	    	o.name,
	    	o.platform_ico,
	    	o.platformlist_ico,
	    	
	    	CASE o.grade 
				WHEN 1 THEN 'B'
				WHEN 2 THEN 'BB'
				WHEN 3 THEN 'BBB'
				WHEN 4 THEN 'A'
				WHEN 5 THEN 'AA'
				WHEN 6 THEN 'AAA'
				ELSE '未定义' END grade,
	    	
	    	o.min_profit,
	    	o.max_profit,
	    	o.min_dead_line,
	    	o.max_dead_line,
	    	o.org_url,
	    	o.min_fee_ratio,
	    	o.max_fee_ratio,
	    	o.dead_line_min_self_defined,
	    	o.dead_line_max_self_defined,
	    	o.org_fee_ratio,
	    	o.org_advantage,
	    	o.org_tag,
	    	o.org_product_tag,
	    	o.org_invest_tag,
	    	o.org_planner_tag,
	    	o.org_planner_product_tag,
	    	o.org_advertisement,
	    	o.org_advertisement_url,
	    	o.pc_platform_img,
		    o.pc_platform_list_img,
		    o.pc_platform_detail_img,
	   		COUNT(p.org_number) usable_product_nums
	   FROM tcim_org_info o LEFT JOIN tcim_product p 
		   		ON o.org_number = p.org_number AND p.`status` = 1 
					WHERE o.`status` = 1
					<choose>
						<!-- 灰度名单判定 -->
						<when test="isGrayUser == true">
							AND o.org_gray_status IN (0,1)
						</when>
						<otherwise>
							AND o.org_gray_status = 0
						</otherwise>
					</choose>
					<!-- 机构所在城市 -->
					<choose>
						<when test=" 'other' == city ">
							AND o.city NOT IN
							<foreach collection="orgCityList" item="cty" open="(" separator="," close=")">
								#{cty.configValue}
							</foreach>
						</when>
						 
						<when test="null != city and 'other' != city">
							AND o.city LIKE CONCAT('%','${city}','%' ) 
						</when>
						<!--
						<otherwise>
						</otherwise>
						 -->
					</choose>
					
					<!-- 机构背景 -->
					<if test=" null != background and ''!= background ">
							AND o.context LIKE CONCAT('%','${background}','%' ) 
					</if>
					
					<!-- 机构评级 -->
					<if test=" null != securityLevel and ''!= securityLevel ">
						<![CDATA[
							AND o.grade ${securityLevel}
						]]>
					</if>
					
					<!-- 机构产品期限 -->
					<if test=" null != minDeadLine and ''!= minDeadLine and null != maxDeadLine and ''!= maxDeadLine ">
						<![CDATA[
							AND (
								   (o.min_dead_line <= #{minDeadLine} AND o.max_dead_line >= #{maxDeadLine})
								OR (o.min_dead_line >= #{minDeadLine} AND o.min_dead_line <= #{maxDeadLine}) 
								OR (o.max_dead_line >= #{minDeadLine} AND o.max_dead_line <= #{maxDeadLine})  
								OR (o.min_dead_line >= #{minDeadLine} AND o.max_dead_line <= #{maxDeadLine})
							)
						]]>
					</if>
					
					<!-- 机构年化收益 -->
					<if test=" null != minYearProfit and ''!= minYearProfit and null != maxYearProfit and ''!= maxYearProfit ">
						<![CDATA[
							AND (
									(o.min_profit <= #{minYearProfit} AND o.max_profit >= #{maxYearProfit}) 
								 OR (o.min_profit >= #{minYearProfit} AND o.min_profit <= #{maxYearProfit})
								 OR (o.max_profit >= #{minYearProfit} AND o.max_profit <= #{maxYearProfit})  
								 OR (o.min_profit >= #{minYearProfit} AND o.max_profit <= #{maxYearProfit})
							)
						]]>
					</if>
			       GROUP BY o.org_number 
				   ORDER BY o.top
    </select>
    
    <!-- APP端 平台信息详情 -->
    <select id="findOrgInfo" resultMap="CimOrgInfoDetails">
	    SELECT
	    t.platform_detail_img,
		t.org_number,
		t.`name`,
		t.platform_ico,
		
		CASE t.grade 
		WHEN 1 THEN 'B'
		WHEN 2 THEN 'BB'
		WHEN 3 THEN 'BBB'
		WHEN 4 THEN 'A'
		WHEN 5 THEN 'AA'
		WHEN 6 THEN 'AAA'
		ELSE '未定义' END grade,
		
		t.org_url,
		t.context,
		t.capital,
		t.city,
		t.icp_filing,
		t.up_time,
		t.min_profit,
	   	t.max_profit,
	    t.min_dead_line,
	    t.max_dead_line,
	    t.trusteeship,
	    t.org_profile,
	    t.org_security,
	    t.min_fee_ratio,
	    t.max_fee_ratio,
	    t.dead_line_max_self_defined,
	    t.dead_line_min_self_defined,
	    t.org_fee_type,
	    t.org_amount_limit,
	    t.org_investdeadline_limit,
	    t.org_isstaticproduct,
	    t.org_advantage,
	    t.org_tag,
	    t.org_product_tag,
	    t.org_invest_strategy,
	    t.org_planner_strategy,
	    t.org_honor,
	    t.org_joint_type,
	    
	    t1.org_icon,
	    t1.org_membergrade,
	    t1.org_membername,
	    t1.org_describe   
	FROM
		tcim_org_info t LEFT JOIN tcim_org_memberinfo t1 
		
	ON
		t.id = t1.orgid 
				
	WHERE	
		t.org_number = #{orgNo}
    	ORDER BY t1.sort
    </select>
    
    <!-- 	PC端 平台信息详情  	-->
    <select id="findPcOrgInfo" resultMap="PcCimOrgInfoDetails">
	     SELECT
			t.org_number,
			t.`name`,
			
			CASE t.grade 
			WHEN 1 THEN 'B'
			WHEN 2 THEN 'BB'
			WHEN 3 THEN 'BBB'
			WHEN 4 THEN 'A'
			WHEN 5 THEN 'AA'
			WHEN 6 THEN 'AAA'
			ELSE '未定义' END grade,
			
			t.org_url,
			t.context,
			t.capital,
			t.city,
			t.icp_filing,
			t.up_time,
			t.min_profit,
		   	t.max_profit,
		    t.min_dead_line,
		    t.max_dead_line,
		    t.trusteeship,
		    t.org_profile,
		    t.org_security,
		    t.min_fee_ratio,
		    t.max_fee_ratio,
		    t.dead_line_max_self_defined,
		    t.dead_line_min_self_defined,
		    t.org_fee_type,
		    t.org_amount_limit,
		    t.org_investdeadline_limit,
		    t.org_isstaticproduct,
		    t.org_advantage,
		    t.org_tag,
		    t.org_product_tag,
		    t.org_invest_tag,
		    t.org_invest_strategy,
		    t.org_planner_strategy,
		    t.org_debenture_transfer,
		    t.org_bid_security,
		    t.org_security_mode,
		    t.org_website_records,
		    t.org_contact_details,
		    t.org_investigation_report,
		    t.org_investigation_report_url,
		    t.org_joint_type,
		    t.pc_platform_img,
		    t.pc_platform_list_img,
		    t.pc_platform_detail_img,
		    
		    t1.org_icon,
		    t1.org_membergrade,
		    t1.org_membername,
		    t1.org_describe
		   
	FROM
		tcim_org_info t LEFT JOIN tcim_org_memberinfo t1 
		
	ON
		t.id = t1.orgid 
				
	WHERE	
		t.org_number = #{orgNumber}
    	ORDER BY t1.sort
    </select>
	
	<!--APP端 优质机构 -->
	<select id="findRecommendOrg" resultMap="BaseResultMap">
		SELECT  
			org_number,name,org_url,platform_ico
			
			FROM tcim_org_info 
			WHERE 1 = 1
			<choose>
				<!-- 灰度名单判定 -->
				<when test="null != orgGrayStatus">
					AND org_gray_status IN (0,1)
				</when>
				<otherwise>
					AND org_gray_status = 0
				</otherwise>
			</choose>
			AND `status` = 1
			AND recommend = 1
			AND homepage_sort IS NOT NULL
			
			ORDER BY homepage_sort
			LIMIT 10
  	</select>
  
  	<!--PC端 优质机构 -->
	<select id="findPcRecommendOrg" resultMap="BaseResultMap">
		 SELECT 
		    o.platformlist_ico,
	    	o.org_number,
	    	o.name,
	    	o.pc_platform_img,
		    o.pc_platform_list_img,
		    o.pc_platform_detail_img,
	    	CASE o.grade 
				WHEN 1 THEN 'B'
				WHEN 2 THEN 'BB'
				WHEN 3 THEN 'BBB'
				WHEN 4 THEN 'A'
				WHEN 5 THEN 'AA'
				WHEN 6 THEN 'AAA'
				ELSE '未定义' END grade,
	    	
	    	o.min_profit,
	    	o.max_profit,
	    	o.min_dead_line,
	    	o.max_dead_line,
	    	o.min_fee_ratio,
	    	o.max_fee_ratio,
	    	o.dead_line_min_self_defined,
	    	o.dead_line_max_self_defined,
	        o.org_advertisement,
	        o.org_advertisement_url,
	   		COUNT(p.org_number) usable_product_nums
	   			FROM tcim_org_info o LEFT JOIN tcim_product p 
			   		ON o.org_number = p.org_number AND p.`status` = 1 
						WHERE o.`status` = 1
						<choose>
							<!-- 灰度名单判定 -->
							<when test="isGrayUser == true">
								AND o.org_gray_status IN (0,1)
							</when>
							<otherwise>
								AND o.org_gray_status = 0
							</otherwise>
						</choose>
						AND o.recommend = 1
						AND o.homepage_sort IS NOT NULL
			  GROUP BY o.org_number
			  ORDER BY o.homepage_sort
  	</select>
  	
  	<!--PC端 最新入驻机构 -->
	<select id="queryLatestOrg" resultMap="BaseResultMap">
		 SELECT 
	    	o.org_number,			
	    	o.name,
			o.org_profile,
			o.org_newest_img,
	    	CASE o.grade 
				WHEN 1 THEN 'B'
				WHEN 2 THEN 'BB'
				WHEN 3 THEN 'BBB'
				WHEN 4 THEN 'A'
				WHEN 5 THEN 'AA'
				WHEN 6 THEN 'AAA'
				ELSE '未定义' END grade
	    	
			FROM tcim_org_info o 	   		
			WHERE o.`status` = 1
			<choose>
				<!-- 灰度名单判定 -->
				<when test="isGrayUser == true">
					AND o.org_gray_status IN (0,1)
				</when>
				<otherwise>
					AND o.org_gray_status = 0
				</otherwise>
			</choose>
			ORDER BY o.create_time DESC
			LIMIT 8
	</select>
  	
  <!-- 平台帐号管理列表 -->
  <select id="queryPlatformAcctManagerPageList" resultMap="PlatformAcctManagerListResp" parameterType="HashMap">
  	SELECT o.name as org_name,o.org_number, o.platformlist_ico ,org_advertisement,o.org_isstaticproduct,o.cooperation_end_url,o.status,
  		CASE o.grade 
				WHEN 1 THEN 'B'
				WHEN 2 THEN 'BB'
				WHEN 3 THEN 'BBB'
				WHEN 4 THEN 'A'
				WHEN 5 THEN 'AA'
				WHEN 6 THEN 'AAA'
				ELSE '未定义' END grade,
    	o.min_profit,
    	o.max_profit,
    	o.min_dead_line,
    	o.max_dead_line,
    	o.dead_line_min_self_defined,
	    o.dead_line_max_self_defined,
	    IFNULL(b.investAmount,0) investAmount ,IFNULL(b.investCount,0) investCount,IFNULL(b.totalProfix,0) totalProfix,
    	(select count(1) from tcim_product p where p.org_number = o.org_number AND p.`status` = 1 ) as usableProductNums,
  		a.org_account, a.is_invested,a.is_new_user,a.creat_time from tcim_org_info o 
	LEFT JOIN
	(
	SELECT * from tcrm_org_acct_rel r where r.user_id=#{userId}
	) a
	on o.org_number = a.org_number
	LEFT JOIN
	(SELECT sum(invest_amt) investAmount, count(1) investCount, sum(accurate_profit) totalProfix, platfrom,max(create_time) investTime  from tcim_product_invest_record 
	where  user_id =#{userId}
	GROUP BY platfrom) b
	on o.org_number=b.platfrom
	where 1=1 
	
	and o.org_isstaticproduct=0
	<if test=" null != type and ''!= type ">
		<if test=" 1 == type ">
			and o.status IN(0,1)
			and a.org_account is not null
		</if>
		<if test=" 2 == type ">
			<choose>
				<!-- 灰度名单判定 -->
				<when test="isGrayUser == true">
					AND o.org_gray_status IN (0,1)
				</when>
				<otherwise>
					AND o.org_gray_status = 0
				</otherwise>
			</choose>
		    and o.status = 1
			and a.org_account is null
		</if>
		<if test=" 3 == type ">
			<choose>
				<!-- 灰度名单判定 -->
				<when test="isGrayUser == true">
					AND o.org_gray_status IN (0,1)
				</when>
				<otherwise>
					AND o.org_gray_status = 0
				</otherwise>
			</choose>
		    and (o.status = 1 and a.org_account is null)
		    or (o.status IN(0,1) and a.org_account is not null)
		</if>
	</if>
	ORDER BY b.investTime desc, o.id
  </select>
  
   <!-- 用户绑定的机构账户数 -->
   <select id="bindOrgAccountCount" resultMap="PlatformAcctManagerListResp">
		SELECT o.name as org_name,o.org_number,o.status,
		    IFNULL(b.investAmount,0) investAmount ,IFNULL(b.investCount,0) investCount,IFNULL(b.totalProfix,0) totalProfix
	  		FROM tcim_org_info o 
			LEFT JOIN
			(
			SELECT * from tcrm_org_acct_rel r where r.user_id = #{userId}
			) a
			on o.org_number = a.org_number
			LEFT JOIN
			(SELECT sum(invest_amt) investAmount, count(1) investCount, sum(accurate_profit) totalProfix, platfrom  FROM tcim_product_invest_record 
			where  user_id = #{userId}
			GROUP BY platfrom) b
			on o.org_number=b.platfrom
			WHERE 1=1 
			
			AND o.org_isstaticproduct = 0
			AND o. STATUS IN(0,1)
			AND a.org_account IS NOT NULL
			ORDER BY
				b.investCount DESC,
				o.id
  </select>
  
   <!-- 用户未绑定的机构账户数 -->
   <select id="unBindOrgAccountCount" resultType="int">
		SELECT
			count(1)
		FROM
			tcim_org_info o
		LEFT JOIN (
			SELECT
				*
			FROM
				tcrm_org_acct_rel r
			WHERE
				r.user_id =#{userId}
		) a ON o.org_number = a.org_number
		LEFT JOIN (
			SELECT
				count(1) investCount,
				platfrom
			FROM
				tcim_product_invest_record
			WHERE
				user_id =#{userId}
			GROUP BY
				platfrom
		) b ON o.org_number = b.platfrom
		WHERE
			1 = 1
		AND o.org_isstaticproduct = 0
			<choose>
				<!-- 灰度名单判定 -->
				<when test="isGrayUser == true">
					AND o.org_gray_status IN (0,1)
				</when>
				<otherwise>
					AND o.org_gray_status = 0
				</otherwise>
			</choose>
		AND o. STATUS = 1
		AND a.org_account IS NULL
  </select>
  
  <select id="queryOrgAccountCount" resultType="int">
  	SELECT count(1) FROM tcrm_org_acct_rel r LEFT JOIN tcim_org_info t ON r.org_number = t.org_number WHERE r.user_id =#{userId} and t.status IN(0,1) and t.org_isstaticproduct = 0 
  </select>
  
  <select id="queryOrgCount" resultType="int">
  	SELECT count(1) FROM tcim_org_info where status=1 and org_isstaticproduct=0
  </select>
  
  <insert id="insertOrgAcctRel" parameterType="com.eshop4j.web.model.CrmOrgAcctRel" >
    INSERT INTO tcrm_org_acct_rel
		<trim prefix="(" suffix=")" suffixOverrides=",">
			 	<if test=" null != id ">
					id,
				</if>
				<if test=" null != userId and ''!= userId  ">
					user_id,
				</if>
			 	<if test=" null != orgNumber and ''!= orgNumber  ">
					org_number,
				</if>
			 	<if test=" null != orgAccount and ''!= orgAccount  ">
					org_account,
				</if>
				<if test=" null != orgAccountType and ''!= orgAccountType  ">
					org_account_type,
				</if>
			 	<if test=" null != isInvested and ''!= isInvested  ">
					is_invested,
				</if>
			 	<if test=" null != isNewUser and ''!= isNewUser  ">
					is_new_user,
				</if>
			 	<if test=" null != creatTime ">
					creat_time,
				</if>
				<if test=" null != updateTime ">
					update_time,
				</if>
		</trim>
		<trim prefix="VALUES(" suffix=")" suffixOverrides=",">
			 	<if test=" null != id ">
					 	#{id},
				</if>
				<if test=" null != userId and ''!= userId  ">
					 	#{userId},
				</if>
			 	<if test=" null != orgNumber and ''!= orgNumber  ">
					 	#{orgNumber},
				</if>
			 	<if test=" null != orgAccount and ''!= orgAccount  ">
						#{orgAccount},
				</if>
				<if test=" null != orgAccountType and ''!= orgAccountType  ">
						#{orgAccountType},
				</if>
				<if test=" null != isInvested and ''!= isInvested  ">
						#{isInvested},
				</if>
			 	<if test=" null != isNewUser and ''!= isNewUser  ">
					 	#{isNewUser},
				</if>
			 	<if test=" null != creatTime ">
					 	#{creatTime},
				</if>
				<if test=" null != updateTime ">
					 	#{updateTime},
				</if>
		</trim>
  </insert>
  
	<!-- 是否绑定机构帐号 -->
   <select id="queryIsBindOrgAcct" resultType="int">
  	SELECT count(1) FROM tcrm_org_acct_rel r  WHERE r.user_id =#{userId} and r.org_number=#{platFromNumber}
  </select>
  
  <!-- 通过用户id查询用户第三方机构帐号 -->
   <select id="queryThirdOrgAccountByUserId" resultType="String">
  		SELECT org_account FROM tcrm_org_acct_rel r  WHERE r.user_id =#{userId} and r.org_number=#{orgNo}
   </select>
   
   <!-- 通过第三方机构帐号查询用户id -->
   <select id="queryUserIdByThirdOrgAccount" resultType="String">
  		SELECT user_id FROM tcrm_org_acct_rel r  WHERE r.org_account =#{thirdOrgAccount} and r.org_number=#{orgNo}
   </select>
  
  <!-- 查询投资者最新登录日志uuid -->
   <select id="queryInvestorLoginId" resultType="String">
  		SELECT log_id FROM tcrm_investor_login_log  WHERE user_id =#{userId} order by create_time desc limit 1
   </select>
   
   <!-- 根据合作状态查询机构 -->
   <select id="queryOrgByStatus" resultType="com.eshop4j.web.model.cim.CimOrginfoBindSelect">
  		SELECT org_number orgNumber,name orgName FROM tcim_org_info WHERE `status` = #{status} AND org_isstaticproduct = 1
   </select>
   
  <!--  更新第三方用户投资状态 -->
   <update id="updateOrgAcctRelInvested" >
   		update tcrm_org_acct_rel set is_invested=1 where user_id=#{userId} and org_number=#{orgNumber}
   </update>
   
   <!-- WEB端 平台信息详情 -->
   <select id="findWebOrgInfo" resultMap="CimOrgInfoWebDetails">
	    SELECT
	    t.id,
		t.org_number,
		t.`name`,
		t.org_account,
		t.org_password,
		t.recommend,
		t.`status`,
		
		CASE t.grade 
		WHEN 1 THEN 'B'
		WHEN 2 THEN 'BB'
		WHEN 3 THEN 'BBB'
		WHEN 4 THEN 'A'
		WHEN 5 THEN 'AA'
		WHEN 6 THEN 'AAA'
		ELSE '未定义' END grade,
		
		t.org_url,
		t.contact,
		t.representative,
		t.context,
		t.capital,
		t.city,
		t.icp_filing,
		t.up_time,
		t.min_profit,
	   	t.max_profit,
	    t.min_dead_line,
	    t.max_dead_line,
	    t.trusteeship,
	    t.org_profile,
	    t.org_security,
	    t.platform_ico,
	    t.platformlist_ico,
	    t.platform_detail_img,
	    t.business_license,
	    t.min_fee_ratio,
	    t.max_fee_ratio,
	    t.org_fee_ratio,
	    t.org_product_url,
	    t.org_usercenter_url,
	    t.org_bind_user_url,
	    t.org_userbalance_url,
	    t.org_user_exist_url,
	    t.org_fee_type,
	    t.org_isstaticproduct,
	    t.org_advertisement,
	    t1.tid,
	    t1.org_icon,
	    t1.org_membergrade,
	    t1.org_membername,
	    t1.org_describe
	FROM
		tcim_org_info t LEFT JOIN tcim_org_memberinfo t1 
	
	ON
		t.id = t1.orgid
	WHERE	
		t.org_number = #{orgNumber}
    
    </select>
   
   
   <!-- 是否平台新用户 1=是|0=否 -->
   <select id="isOrgNewUser" resultType="boolean">
   		SELECT IFNULL(is_new_user,1) FROM tcrm_org_acct_rel WHERE user_id=#{userId} AND org_number=#{orgNumber}
   </select>
   
   <!-- WEB端 查询机构收费模式 -->
   <select id="queryOrgFeeInfo" resultType="com.eshop4j.web.model.cim.CimOrginfoWeb">
	   SELECT
	   		org_number orgNumber,
		    org_fee_type orgFeeType,
	   	 	org_amount_limit orgAmountLimit,
		    org_investdeadline_limit orgInvestdeadlineLimit
		FROM
			tcim_org_info 
		WHERE	
			org_number = #{orgNumber}
   </select>
  
  <!-- 根据产品id查询该产品对应的机构基本信息 --> 
  <select id="queryCimOrginfoByProductid" resultMap="BaseResultMap" parameterType="String" >
    select 
    <include refid="Base_Column_List_T" />
    from tcim_org_info t,
         tcim_product tp
    where
		tp.product_id = #{productId}
	AND t.org_number = tp.org_number    
  </select>
  
   <!--移动端 查询理财师给投资客户推荐的机构 -->
    <select id="queryPlannerRecommendPlatfrom" resultMap="BaseResultMap">
			SELECT t.* FROM (
					 SELECT 
						    	o.org_number,
						    	o.name,
						    	o.platform_ico,
						    	
						    	CASE o.grade 
									WHEN 1 THEN 'B'
									WHEN 2 THEN 'BB'
									WHEN 3 THEN 'BBB'
									WHEN 4 THEN 'A'
									WHEN 5 THEN 'AA'
									WHEN 6 THEN 'AAA'
									ELSE '未定义' END grade,
						    	
						    	o.min_profit,
						    	o.max_profit,
						    	o.min_dead_line,
						    	o.max_dead_line,
						    	o.dead_line_min_self_defined,
						    	o.dead_line_max_self_defined,
						    	o.org_fee_ratio,
						    	o.org_advantage,
						    	o.org_tag,
						    	o.org_product_tag,
						    	o.org_invest_tag,
						    	o.org_planner_tag,
						   		COUNT(p.org_number) usable_product_nums
						   FROM tcim_org_info o LEFT JOIN tcim_product p 
							   		ON o.org_number = p.org_number AND p.`status` = 1 
										WHERE o.`status` = 1
					 	   GROUP BY o.org_number 
					
					) t 
					
					INNER JOIN  tcim_org_ref t1 ON t.org_number = t1. org_number
					WHERE 1=1
					AND t1.investor_user_id = #{investUserId}
					AND t1.sale_user_id = #{saleUserId}
					ORDER BY t1.recommend_time DESC
    </select>
    
   <!--PC端 查询理财师给投资客户推荐的机构 -->
    <select id="queryPcPlannerRecommendPlatfrom" resultMap="BaseResultMap">
			SELECT t.* FROM (
					 SELECT 
						    	o.org_number,
						    	o.name,
						    	o.platformlist_ico,
						    	
						    	CASE o.grade 
									WHEN 1 THEN 'B'
									WHEN 2 THEN 'BB'
									WHEN 3 THEN 'BBB'
									WHEN 4 THEN 'A'
									WHEN 5 THEN 'AA'
									WHEN 6 THEN 'AAA'
									ELSE '未定义' END grade,
						    	
						    	o.min_profit,
						    	o.max_profit,
						    	o.min_dead_line,
						    	o.max_dead_line,
						    	o.dead_line_min_self_defined,
						    	o.dead_line_max_self_defined,
						    	o.org_advertisement,
	        					o.org_advertisement_url,
	        					o.org_invest_tag,
						    	o.org_planner_tag,
						   		COUNT(p.org_number) usable_product_nums
						   FROM tcim_org_info o LEFT JOIN tcim_product p 
							   		ON o.org_number = p.org_number AND p.`status` = 1 
										WHERE o.`status` = 1
					 	   GROUP BY o.org_number 
					
					) t 
					
					INNER JOIN  tcim_org_ref t1 ON t.org_number = t1. org_number
					WHERE 1=1
					AND t1.investor_user_id = #{investUserId}
					AND t1.sale_user_id = #{saleUserId}
					ORDER BY t1.recommend_time DESC
    </select>
       
   <!-- 查询机构产品-投资攻略 -->
   <select id="queryInvestmentStrategy" resultType="com.eshop4j.web.response.orgInfo.InvestmentStrategyResponse">
		SELECT
			toi.org_invest_strategy AS orgInvestStrategy,
			toi.org_planner_strategy AS orgPlannerStrategy
		FROM
			tcim_org_info toi
		WHERE
			toi.org_number = #{orgCode}
        AND toi.`status` = 1
   </select>
      <!-- WEB端 查询机构佣金信息 -->
   <select id="queryOrgFeeRatio" resultType="BigDecimal">
	   SELECT org_fee_ratio FROM tcim_org_info 
		WHERE	
			org_number = #{orgNumber}
   </select>
      <!-- APP端 查询机构安全保障 -->
   <select id="queryOrgSecurity" resultType="String">
	   SELECT org_security FROM tcim_org_info 
		WHERE	
			org_number = #{orgNumber}
   </select>
    
   <select id="selectListByGrade" resultMap="BaseResultMap">
		select <include refid="Base_Column_List" /> from tcim_org_info 
		where 1=1 and status = 1
		<if test=" null != securityLevel and ''!= securityLevel">
			and grade ${securityLevel}
		</if>
		<if test=" ifHaveGray == false "> <!-- 增加灰度权限管控-->
			AND org_gray_status = 0
		</if>
		ORDER BY top ASC
   </select>
   
     <!-- APP接口 查询理财师级差佣金信息 -->
   <select id="queryOrgDiffFeeRatio" resultType="BigDecimal">
	   SELECT diff_fee_ratio FROM tcim_org_info 
		WHERE	
			org_number = #{orgNumber}
   </select>
   
   <!-- 查看机构可投产品数 -->
   <select id="queryOrgUseProductNums" resultType = "Integer">
		SELECT 
		
		 COUNT(p.org_number) usable_product_nums
		
		FROM 
		 tcim_product p ,tcim_product_statistics tps WHERE  p.org_number = #{orgNumber} AND p.product_id = tps.product_id  
		
		AND p.status = 1 AND p.audit_status = 1 AND p.buy_total_money  <![CDATA[ > ]]>  tps.buyed_total_money
		GROUP BY p.org_number
   </select>
   
</mapper>